{"version":3,"sources":["../es6/containingMovement.js"],"names":[],"mappings":"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","file":"containingMovement.js","sourcesContent":["//Aliases\nlet Container = PIXI.Container,\n  autoDetectRenderer = PIXI.autoDetectRenderer,\n  loader = PIXI.loader,\n  Sprite = PIXI.Sprite;\n\n//Create a Pixi stage and renderer \nlet stage = new Container(),\n  renderer = autoDetectRenderer(512, 512);\ndocument.body.appendChild(renderer.view);\n\n//Set the canvas's border style and background color\nrenderer.view.style.border = \"1px dashed black\";\nrenderer.backgroundColor = \"0xFFFFFF\";\n\n//load an image and run the `setup` function when it's done\nloader\n  .add(\"images/pixie96x48.png\")\n  .load(setup);\n\n//Define any variables that are used in more than one function\nlet pixie, state;\n\nfunction setup() {\n\n  //Create the `pixie` sprite \n  pixie = new Sprite.fromImage(\"images/pixie96x48.png\");\n\n  //Center the sprite\n  pixie.x = renderer.view.width / 2 - pixie.width / 2;\n  pixie.y = renderer.view.height / 2 - pixie.height / 2;\n\n  //Initialize the sprites's velocity variables\n  pixie.vx = 0;\n  pixie.vy = 0;\n\n  //Acceleration and friction properties\n  pixie.accelerationX = 0;\n  pixie.accelerationY = 0;\n  pixie.frictionX = 1;\n  pixie.frictionY = 1;\n\n  //Set the pixie's speed\n  pixie.speed = 0.2;\n\n  //The friction resistance\n  pixie.drag = 0.98;\n\n  //Add the sprite to the stage\n  stage.addChild(pixie);\n\n  //Capture the keyboard arrow keys\n  var left = keyboard(37),\n      up = keyboard(38),\n      right = keyboard(39),\n      down = keyboard(40);\n\n  //Left arrow key `press` method\n  left.press = () => {\n\n    //Increase the acceleration\n    pixie.accelerationX = -pixie.speed;\n\n    //Remove friction so the sprite moves freely\n    pixie.frictionX = 1;\n  };\n\n  //Left arrow key `release` method\n  left.release = () => {\n\n    //If the left arrow has been released, and the right arrow isn't down,\n    //stop acceleration and apply friction\n    if (!right.isDown) {\n      pixie.accelerationX = 0;\n      pixie.frictionX = pixie.drag;\n    }\n  };\n\n  //Up\n  up.press = () => {\n    pixie.accelerationY = -pixie.speed;\n    pixie.frictionY = 1;\n  };\n  up.release = () => {\n    if (!down.isDown) {\n      pixie.accelerationY = 0;\n      pixie.frictionY = pixie.drag;\n    }\n  };\n\n  //Right\n  right.press = () => {\n    pixie.accelerationX = pixie.speed;\n    pixie.frictionX = 1;\n  };\n  right.release = function() {\n    if (!left.isDown) {\n      pixie.accelerationX = 0;\n      pixie.frictionX = pixie.drag;\n    }\n  };\n\n  //Down\n  down.press = () => {\n    pixie.accelerationY = pixie.speed;\n    pixie.frictionY = 1;\n  };\n  down.release = () => {\n    if (!up.isDown) {\n      pixie.accelerationY = 0;\n      pixie.frictionY = pixie.drag;\n    }\n  };\n\n  //Set the game's current state to `play`\n  state = play;\n \n  //Start the game loop\n  gameLoop();\n}\n\nfunction gameLoop(){\n\n  //Loop this function 60 times per second\n  requestAnimationFrame(gameLoop);\n\n  //Update the current game state:\n  state();  \n\n  //Render the stage\n  renderer.render(stage);\n}\n\nfunction play() {\n\n  //Apply acceleration by adding the acceleration\n  //to the sprite's velocity\n  pixie.vx += pixie.accelerationX;\n  pixie.vy += pixie.accelerationY;\n\n  //Apply friction by multiplying sprite's velocity by the friction\n  pixie.vx *= pixie.frictionX;\n  pixie.vy *= pixie.frictionY;\n\n  //Add optional gravity\n  //pixie.vy += 0.1;\n\n  //Apply the velocity to the sprite's position to\n  //make it move\n  pixie.x += pixie.vx;\n  pixie.y += pixie.vy;\n\n  let collision = contain(\n    pixie,                           //The sprite you want to contain\n    {                                //An object that defines the area\n      x: 0,                          //`x` position\n      y: 0,                          //`y` position\n      width: renderer.view.width,    //`width`\n      height: renderer.view.height   //`height`\n    }\n  );\n\n  //Check for a collision. If the value of `collision` isn't\n  //`undefined` then you know the sprite hit a boundary  \n  if (collision) {\n\n    //Reverse the sprite's `vx` value if it hits the left or right\n    if (collision.has(\"left\") || collision.has(\"right\")) pixie.vx = -pixie.vx;\n\n    //Reverse the sprite's `vy` value if it hits the top or bottom\n    if (collision.has(\"top\") || collision.has(\"bottom\")) pixie.vy = -pixie.vy;\n\n    //Optionally display the values that the `collision` set contains\n    collision.forEach(item => console.log(item));\n  }\n}\n\n//The contain helper function\nfunction contain(sprite, container) {\n\n  //Create a set called `collision` to keep track of the\n  //boundaries with which the sprite is colliding\n  var collision = new Set();\n\n  //Left\n  if (sprite.x < container.x) {\n    sprite.x = container.x;\n    collision.add(\"left\");\n  }\n\n  //Top\n  if (sprite.y < container.y) {\n    sprite.y = container.y;\n    collision.add(\"top\");\n  }\n\n  //Right\n  if (sprite.x + sprite.width > container.width) {\n    sprite.x = container.width - sprite.width;\n    collision.add(\"right\");\n  }\n\n  //Bottom\n  if (sprite.y + sprite.height > container.height) {\n    sprite.y = container.height - sprite.height;\n    collision.add(\"bottom\");\n  }\n\n  //If there were no collisions, set `collision` to `undefined`\n  if (collision.size === 0) collision = undefined;\n\n  //Return the `collision` value\n  return collision;\n}\n\n//The `keyboard` helper function\nfunction keyboard(keyCode) {\n  let key = {};\n  key.code = keyCode;\n  key.isDown = false;\n  key.isUp = true;\n  key.press = undefined;\n  key.release = undefined;\n\n  //The `downHandler`\n  key.downHandler = event => {\n    if (event.keyCode === key.code) {\n      if (key.isUp && key.press) key.press();\n      key.isDown = true;\n      key.isUp = false;\n    }\n    event.preventDefault();\n  };\n\n  //The `upHandler`\n  key.upHandler = event => {\n    if (event.keyCode === key.code) {\n      if (key.isDown && key.release) key.release();\n      key.isDown = false;\n      key.isUp = true;\n    }\n    event.preventDefault();\n  };\n\n  //Attach event listeners\n  window.addEventListener(\n    \"keydown\", key.downHandler.bind(key), false\n  );\n  window.addEventListener(\n    \"keyup\", key.upHandler.bind(key), false\n  );\n\n  //Return the key object\n  return key;\n}\n\n\n"]}